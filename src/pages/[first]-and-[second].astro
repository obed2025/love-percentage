---
import LayoutWithDynamicOG from '../layouts/LayoutWithDynamicOG.astro';
import calculateLovePercentage from '../lib/percentage';
import Results from '../components/Results/index.svelte';
import { replaceUnderscores } from '../lib/utils';

export const prerender = false;
let { first = '', second = '' } = Astro.params;
first = replaceUnderscores(first);
second = replaceUnderscores(second);

const names = `${first} & ${second}`;
const steps = calculateLovePercentage(first, second);
const percentage = steps.at(-1) ?? 0;

const title = `${first} Loves ${second} ${percentage}%`;
const desc = `${first} and ${second} have a love percentage of ${percentage}%.`;
---

<LayoutWithDynamicOG {names} {percentage} {title} {desc}>
  <Results {first} {second} origin={Astro.url.origin} client:load />
</LayoutWithDynamicOG>
